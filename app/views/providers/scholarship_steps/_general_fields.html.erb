<div class="row">
  <div class="field required">
    <%= f.label 'Scholarship Title' %>
    <div class="col-container">
      <%= f.text_field :title, required: true, class: "full" %>
    </div>
  </div>
</div>

<div class="row">
  <div class="field required">
    <%= f.label :description %>
    <div class="col-container">
      <%= f.text_area :description, required: true, class: "full" %>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :eligibility %>
    <div class="col-container">
      <%= f.text_area :eligibility, class: "full" %>
    </div>
  </div>
</div>

<div class="row" id="photo-row">
  <div class="field">
    <%= f.label :photo_url, 'Scholarship Banner Image' %>
    <div class="col-container">
      <div class="col">
        <div class="filepicker-wrapper">
          <input id="filepicker-input"
                class="upload-btn"
                data-fp-button-text="Choose File"
                data-fp-apikey="Aw4WfTTq8QxmplkGIzrYgz"
                data-fp-crop-ratio="3/2"
                data-fp-crop-force="true"
                data-fp-openTo="COMPUTER"
                data-fp-multiple="false"
                mimetype="image/*"
                type="filepicker"
                name="scholarship[photo_url]"
                value="<%= @scholarship.try(:photo_url) %>"
                onchange="insertFilepickerImg(event)"
                style="display: none;"
                >
        </div>
      </div>
      <div class="col">
        <div id="filepicker-img-overlay">
          <img id="filepicker-img-preview" src="<%= @scholarship.try(:photo_url) %>" height="100" width="160" />
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label 'Scholarship Cycle' %>
    <div class="col-container">
      <div class="col">
        <%= f.text_field :cycle_start, class: "", id: "cycle-start", placeholder: 'Start Date', value: @scholarship.cycle_start_str %>
      </div>
      <div class="col">
        <%= f.text_field :cycle_end, class: "", id: "cycle-end", placeholder: 'End Date', value: @scholarship.cycle_end_str %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label 'Award Amount' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :award_amount, id: "award-amount", placeholder: '$ ' %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label 'Minimum Age' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :minimum_age, placeholder: 15 %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label 'Number of Awards' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :number_of_awards, step: 1, min: 0, placeholder: 1 %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label 'Renewable?' %>
    <div class="col-container">
      <div class="col">
        <%= f.check_box :renewable %>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :gpa, 'Minimum GPA' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :gpa, step: 0.01, placeholder: '0.0' %>
      </div>
      <div class="comment col">
        All GPAs are unweighted
      </div>
      <div class="comment col">
        Skip if you do not have a minimum GPA requirement
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :min_scores, 'Minimum Composite Test Scores' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :minimum_sat_score, placeholder: 'SAT Score' %>
      </div>
      <div class="col">
        <%= f.number_field :minimum_act_score, placeholder: 'ACT Score' %>
      </div>
      <div class="comment col">
        Skip if you do not have score requirements
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :flexible_scores, 'Flexible on GPA and SAT scores?' %>
    <div class="col-container">
      <div class="col">
        <div class="half-col">
          <%= f.label 'Yes', class: "inline-label" %> <%= f.radio_button :flexible_scores, true %>
        </div>
        <div class="half-col">
          <%= f.label 'No', class: "inline-label" %>  <%= f.radio_button :flexible_scores, false %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :generic_recommendation, "Accept Standard Recommendations?" %>
    <div class="col-container">
      <div class="col">
        <div class="half-col">
          <%= f.label 'Yes', class: "inline-label" %> <%= f.radio_button :generic_recommendation, true %>
        </div>
        <div class="half-col">
          <%= f.label 'No', class: "inline-label" %>  <%= f.radio_button :generic_recommendation, false %>
        </div>
      </div>
      <div class="comment col">
        Why Accept a Generic<br>Recommendation?
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="field">
    <%= f.label :minimum_recommendations, 'Number of Required Recommendations' %>
    <div class="col-container">
      <div class="col">
        <%= f.number_field :minimum_recommendations, placeholder: 0 %>
      </div>
      <div class="comment col">
        Skip if you do not require a recommendation
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(function () {
    $('#cycle-start').datetimepicker({
      format: 'L'
    });
    $('#cycle-end').datetimepicker({
      format: 'L'
    });
  });
</script>

<script type="text/javascript">
  // Make Filepicker widget play nice with Turbolinks
  function setupFilepicker() {
    var $uploadBtns = $('button.upload-btn');
    if ($uploadBtns.length < 1) {
      var $filepickerInputs = $('#filepicker-input');
      for (var i = 0; i < $filepickerInputs.length; i++) {
        filepicker.constructWidget($filepickerInputs[i]);
      }
    }
  }

  function insertFilepickerImg(event) {
    var $filepickerImg = $('#filepicker-img-preview');
    $filepickerImg.toggleClass('fade');
    $filepickerImg.attr('src', event.fpfile.url);
    $filepickerImg.toggleClass('fade');
  }

  $(document).on('page:change', setupFilepicker);
  $(document).on('turbolinks:load', setupFilepicker);
</script>
